
{%extends 'base1.html'%}

{%block content%}

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>


    <script src="jquery-3.2.1.min.js"></script>
<script src="bootstrap.min.js"></script>


   <title>Difference between dates in days</title>
    <link href=
"https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
          rel="stylesheet">
    <script src=
"https://code.jquery.com/jquery-1.10.2.js">
    </script>
    <script src=
"https://code.jquery.com/ui/1.10.4/jquery-ui.js">
    </script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>


    <title>Leave Request</title>
</head>
<body>


<main id="main" class="main">


    <section class="section profile">

        <div class="col-xl-12">

          <div class="card" style="height:1100px">


                   <!-- Left side columns -->
        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-12 col-xl-12 col-xxl-12">
          <div class="row">

            <!-- Sales Card -->
           <div class="col-xs-12 col-sm-12 col-md-8 col-lg-3 col-xl-3 col-xxl-3">
              <div class="card info-card sales-card">



                <div class="card-body">
                  <h3 class="card-title" style="color:Violet;">TOTAL LEAVES  : 24 </h3>
					<hr>

                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">

                    </div>
                    <div class="ps-3">
                      <h6 style="color:#33FFE0  ">Casual Leaves :<span style="color:#49FF33">12</span></h6>
						<h6 style="color:MediumSeaGreen">Sick Leaves   : <span style="color:#49FF33">12</span></h6>

                    </div>
                  </div>
                </div>

              </div>
            </div><!-- End Sales Card -->

             <div class="col-xs-12 col-sm-12 col-md-8 col-lg-3 col-xl-3 col-xxl-3">
               <div class="card info-card revenue-card">



                <div class="card-body">
                  <h5 class="card-title" style="color:DodgerBlue;">USED LEAVES </h5><hr>

                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                <i class='far fa-building'></i>
                    </div>
                    <div class="ps-3">
                        <h6 style="color:DodgerBlue;"><b>2</b></h6>
						<h6></h6>

                    </div>
                  </div>
                </div>

              </div>
             </div>
			    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-3 col-xl-3 col-xxl-3">
               <div class="card info-card revenue-card">



                <div class="card-body">
                  <h5 class="card-title" style="color:Orange;">REMAINING LEAVES </h5><hr>

                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                <i class='far fa-building'></i>
                    </div>
                    <div class="ps-3">
                      <h6 style="color:Orange;"><b>22</b></h6>
						<h6></h6>

                    </div>
                  </div>
                </div>

              </div>
             </div>



    <h1 class="ml-3" style="margin-left:15px;color:#FF1493">Apply Leave Request</h1>
			  <hr>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-group" style="margin-left:25px;">
					<label for="employee">
						Employee Name:
					</label>

					<input type="text"
						name="employeename"
						id="firstnames"
                            value="{{ user.username }}"
						class="form-control w-50">

				</div><br>


        <div class="form-group" style="margin-left:25px;">
					<label for="category">
                        Leave Categorey:
					</label>
<select class="form-select w-50 mt-2" aria-label="Default select example" name="category">
    <option  selected="selected" value="{{user}}" disabled>Leave Categorey</option>
                        <option value="Casual Leave">Casual Leave</option>
                       <option value="Medical Leave">Medical Leave</option>
						 <option value="Emergency Leave">Emergency Leave</option>
                            <option value="Others">Others</option>
                </select>


				</div><br>
              <div class="form-group" style="margin-left:25px;">
					<label for="half day">
						Consider Half Leave:
					</label><br>

					 <input type="checkbox" id="first-half" name="check" value="start_date_half">
                       <label for="firstHalfDay"  class="checkbox-inline"> Start Date Half permission</label>&nbsp;&nbsp;

                <input type="checkbox" class="checkbox-inline" id="second-half" name="check" value="end_date_half" >
               <label for="secondHalf"  class="checkbox-inline"> End Date Half permission</label>


				</div><br>






             <div class="form-group" style="margin-left:25px;">
					<label for="startdate">
						StartDate:
					</label>
					<input type="date" name="startdate" id="startdate" value="{{ user.StartDate }}" class="form-control w-50 mt-2" required>

				</div>
        <div class="form-group mt-2" style="margin-left:25px;">
					<label for="enddate">
						EndDate:
					</label>
					<input type="date" name="enddate" id ="enddate" value="{{ user.EndDate }}" class="form-control w-50 mt-2"onchange="getDays()" required>

				</div>

              <div class="form-group mt-2" style="margin-left:25px;">
					<label for="totaldayes">
						TotalDays:
					</label>
					<input type="text" name="totaldays" id="totaldays" class="form-control w-50 mt-2">

				</div>

		    <div class="form-group mt-2" style="margin-left:25px;">
					<label for="reason">
						Reason:
					</label>
					<input type="text"
						name="reason"
						id="reason"
                            value="{{ user.reason }}"
						class="form-control w-50 mt-2">

				</div>

		    <div class="form-group mt-2" style="margin-left:25px;">
					<label for="Commants">
						Commants:
					</label>
					<input type="text"
						name="comments"
						id="comments"
                            value="{{ user.comments }}"
						class="form-control w-50 mt-2">

				</div>


 <button type="submit" class="btn btn-primary btn-lg text-center mt-3 ml-5" style="margin-left:15px;">apply Leave</button>









    </form>
		  </div>
		</div>
	</section>
</main>
</body>
<script>

//get the days between two dates

  function getDays(){

 const startDate= new Date(document.getElementById('startdate').value);
   const endDate = new Date(document.getElementById('enddate').value);
   const firstHalfCheckbox = document.getElementById('first-half');
const secondHalfCheckbox = document.getElementById('second-half');
    //Here we will use getTime() function to get the time difference
   // var time_difference = end_date.getTime() - start_date.getTime();
    //Here we will divide the above time difference by the no of miliseconds in a day
  //  var days_difference = time_difference / (1000*3600*24);
    //alert(days);

    const durationInDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));

    if (firstHalfCheckbox.checked && secondHalfCheckbox.checked) {
    totalDuration = durationInDays + 1;
     } else if (firstHalfCheckbox.checked || secondHalfCheckbox.checked) {
    totalDuration = durationInDays + 0.5;
    } else {
    totalDuration = durationInDays+1;
   }

     document.getElementById('totaldays').value = totalDuration;


  }
</script>



</html>
{%endblock%}